"use strict";var UI={listen:function(){var t=this;this.notifyUser=this.notifyUser.bind(this),this.timerToDisplay=this.timerToDisplay.bind(this),this.options={max:360,min:0,step:6,name:"clock-controller"},this.controller=document.querySelector("#clockController"),this.angle=AngleInput(this.controller,this.options),this.angle(this.controllerPosition),this.clockDisplay=document.querySelector("#clockDisplay"),this.clockface=document.querySelector(".clock__face"),this.clockface.onmousedown=function(i){t.clickHandler(60*t.gradToMinutes(t.angle())),i.stopPropagation()}},notifyUser:function(t,i){var e=new Notification(t,{body:i});e.onclick=function(t){t.preventDefault(),window.open(window.location.href,"Pomodoro")},setTimeout(e.close.bind(e),5e3)},timerToDisplay:function(t,i){this.clockDisplay.innerText=(2!==String(t).length?"0":"")+t+":"+(2!==String(i).length?"0":"")+i}},Application={init:function(){this.startTimer=this.startTimer.bind(this),this.resetTimer=this.resetTimer.bind(this),this.endTimer=this.endTimer.bind(this),this.minutesToGrad=this.minutesToGrad.bind(this),this.syncTimerDisplay=this.syncTimerDisplay.bind(this),this.clickHandler=this.clickHandler.bind(this),this.paused=!1,this.defaultTimer=1,this.timeLeft=60*this.defaultTimer,this.controllerPosition=this.minutesToGrad(this.defaultTimer)},syncTimerDisplay:function(t){var i=Date.now()-this.startTime;if(this.timeLeft=t-Math.floor(i/1e3),console.log("elapsed="+i+", timeout="+t+", timeLeft="+this.timeLeft),this.timeLeft>=0){var e=Math.floor(this.timeLeft/60),s=this.timeLeft-60*e;this.timerToDisplay(e,s)}},clickHandler:function(t){console.log("clicked"),console.log("timeLeft="+this.timeLeft),console.log("paused="+this.paused),this.timerProcessId?this.pauseTimer():this.paused?(console.log("in resume processing"),this.paused=!1,this.startTimer(this.timeLeft)):this.startTimer(t)},startTimer:function(t){var i=this;Notification&&Notification.requestPermission().then(function(t){"denied"===t?console.log("Not granted"):"default"===t?console.log("Not default"):i.notificationGranted=!0}),this.startTime=Date.now(),this.redrawProcessId=setInterval(this.syncTimerDisplay,1e3,t),this.timerProcessId=setTimeout(this.endTimer,1e3*t+100)},endTimer:function(){clearInterval(this.redrawProcessId),clearTimeout(this.timerProcessId),this.notificationGranted&&this.notifyUser("Pomodoro","Time ended")},pauseTimer:function(){clearInterval(this.redrawProcessId),clearTimeout(this.timerProcessId),this.timerProcessId=void 0,this.paused=!0},resetTimer:function(){this.minutesLeft=this.defaultTimer,this.secondsLeft=0,this.timerToDisplay(this.minutesLeft),this.timer&&clearInterval(this.timer)},minutesToGrad:function(t){return t>=0&&t<=15&&(t+=60),360-6*t+90},gradToMinutes:function(t){var i=(360-t+90)/6;return i>=60&&i<=75&&(i-=60),i}},Pomodoro=Object.assign({},UI,Application);Pomodoro.init(),Pomodoro.listen();
//# sourceMappingURL=script.js.map
